<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AdBlock 广告屏蔽</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- 顶部状态栏 -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <circle cx="16" cy="16" r="14" stroke="currentColor" stroke-width="2"/>
                        <path d="M10 16L14 20L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="title">
                    <h1>AdBlock</h1>
                    <span class="subtitle">广告屏蔽管理</span>
                </div>
                <div class="status-badge" id="statusBadge">
                    <span class="status-dot"></span>
                    <span class="status-text">加载中...</span>
                </div>
            </div>
        </header>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- 功能卡片 -->
            <section class="cards">
                <!-- 开关控制 -->
                <div class="card" id="toggleCard">
                    <div class="card-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 6v6l4 2"/>
                        </svg>
                    </div>
                    <div class="card-content">
                        <h3>插件状态</h3>
                        <p class="card-desc">启用或禁用广告屏蔽功能</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="enableToggle" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <!-- 数据源配置 -->
                <div class="card" id="sourceCard">
                    <div class="card-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                        </svg>
                    </div>
                    <div class="card-content">
                        <h3>数据源</h3>
                        <p class="card-desc" id="sourceDesc">当前: StevenBlack Hosts</p>
                    </div>
                    <button class="btn-icon" id="editSource">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                        </svg>
                    </button>
                </div>

                <!-- 更新控制 -->
                <div class="card" id="updateCard">
                    <div class="card-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 2v6h-6"/>
                            <path d="M3 12a9 9 0 0 1 15-6.7L21 8"/>
                            <path d="M3 22v-6h6"/>
                            <path d="M21 12a9 9 0 0 1-15 6.7L3 16"/>
                        </svg>
                    </div>
                    <div class="card-content">
                        <h3>手动更新</h3>
                        <p class="card-desc" id="updateDesc">上次更新: 从未</p>
                    </div>
                    <button class="btn-icon" id="btnUpdate">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 2v6h-6"/>
                            <path d="M3 12a9 9 0 0 1 15-6.7L21 8"/>
                        </svg>
                    </button>
                </div>

                <!-- 日志查看 -->
                <div class="card" id="logCard">
                    <div class="card-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <path d="M14 2v6h6"/>
                            <path d="M16 13H8"/>
                            <path d="M16 17H8"/>
                            <path d="M10 9H8"/>
                        </svg>
                    </div>
                    <div class="card-content">
                        <h3>运行日志</h3>
                        <p class="card-desc">查看模块运行状态</p>
                    </div>
                    <button class="btn-icon" id="btnLog">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </button>
                </div>
            </section>

            <!-- 统计信息 -->
            <section class="stats">
                <div class="stat-item">
                    <span class="stat-value" id="domainCount">-</span>
                    <span class="stat-label">屏蔽域名</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="updateTime">-</span>
                    <span class="stat-label">更新时间</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="lastCheck">-</span>
                    <span class="stat-label">最后检查</span>
                </div>
            </section>
        </main>

        <!-- 日志面板 -->
        <div class="panel" id="logPanel">
            <div class="panel-header">
                <h2>运行日志</h2>
                <button class="btn-close" id="closeLog">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="panel-content">
                <div class="log-container" id="logContainer">
                    <p class="log-empty">加载中...</p>
                </div>
            </div>
            <div class="panel-footer">
                <button class="btn btn-secondary" id="clearLog">清空日志</button>
                <button class="btn btn-primary" id="refreshLog">刷新</button>
            </div>
        </div>

        <!-- 数据源编辑弹窗 -->
        <div class="modal" id="sourceModal">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2>配置数据源</h2>
                    <button class="btn-close" id="closeSource">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 6L6 18M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="sourceUrl">数据源 URL</label>
                        <input type="url" id="sourceUrl" placeholder="https://example.com/hosts">
                        <span class="form-hint">支持 hosts 格式的任意数据源</span>
                    </div>
                    <div class="form-group">
                        <label>预设数据源</label>
                        <div class="preset-list">
                            <button class="preset-btn" data-url="https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts">StevenBlack</button>
                            <button class="preset-btn" data-url="https://raw.githubusercontent.com/neoolution hosts/master/hosts">neoHosts</button>
                            <button class="preset-btn" data-url="https://adaway.org/hosts.txt">AdAway</button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="cancelSource">取消</button>
                    <button class="btn btn-primary" id="saveSource">保存</button>
                </div>
            </div>
        </div>

        <!-- 加载遮罩 -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
        </div>

        <!-- 提示消息 -->
        <div class="toast" id="toast">
            <span class="toast-message"></span>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
